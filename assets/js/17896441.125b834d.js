"use strict";(self.webpackChunkapi_def=self.webpackChunkapi_def||[]).push([[918],{6364:(e,t,r)=>{r.d(t,{Z:()=>qe});var o={};r.r(o),r.d(o,{Api:()=>ae,AxiosRequestBackend:()=>ge,COMPUTED_CONFIG_SYMBOL:()=>J,CacheMiddleware:()=>be,CacheSource:()=>E,Endpoint:()=>K,EventResultType:()=>_,FetchRequestBackend:()=>ee,LocalStorageCacheBackend:()=>de,LocaleForageCacheBackend:()=>me,LoggingMiddleware:()=>Te,RequestEvent:()=>b,RequestMethod:()=>w,ResponseType:()=>C,clearCache:()=>pe,getRequestBackend:()=>ne,isRequestBackendDefault:()=>se,isRequestError:()=>B,setCacheBackend:()=>fe,setRequestBackend:()=>ie});var n=r(7294);const s=e=>{var t;return"NetworkError"===e.name||"Network Error"===e.message||"NetworkError"===(null===(t=e.constructor)||void 0===t?void 0:t.name)},i=[[200,299],304],c=(e,t)=>{const r=null!=t?t:i;for(const o of r)if(Array.isArray(o)){const[t,r]=o;if(e>=t&&e<=r)return!0}else if(!isNaN(o)&&e===o)return!0;return!1},a=["text/plain","text/html","text/xml","application/xml"],u=["text/json","application/json"],d=["application/octet-stream"],h=e=>{const t=null==e?void 0:e.split(";")[0].trim();if(t){if(a.includes(t))return"text";if(u.includes(t))return"json";if(d.includes(t))return"arraybuffer"}return"text"},l=Object.assign||function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const r=Object(e);for(let o=1;o<arguments.length;o++){const e=arguments[o];if(null!=e)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},f=(e,t)=>{const r=e.toString();return r.length>=t?r:"0".repeat(t-r.length)+r},p=()=>void 0!==r.g&&"function"==typeof r.g.fetch?r.g.fetch:"undefined"!=typeof window?window.fetch.bind(window):void 0,m=()=>{};var y=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};let v=0;class g{constructor(e,t,r,o,n){this.canceler=null,this.response=void 0,this.error=null,this.cacheInfo={cached:!1,source:null},this.cancelled=!1,this.backend=e,this.id=v++,this.host=t,this.computedConfig=r,l({},this.computedConfig.headers),this.computedPath=o,this.key=this.generateKey(),this.stats={attempt:0,cached:!1},this.eventHandlers={},this.mocking=n,this.initMiddleware(),this.parseRequestBody()}get method(){return this.host.method}get api(){return this.host.api}get baseUrl(){return this.host.baseUrl}get responseType(){return this.host.responseType}initMiddleware(){const{middleware:e}=this.api;for(let t=0;t<e.length;t++){const r=e[t],o=Object.keys(r);for(let e=0;e<o.length;e++){const t=o[e],n=this.eventHandlers[t]||(this.eventHandlers[t]=[]),s=r[t];s&&n.push(s)}}}generateKey(){let e=this.computedPath.trim();return this.computedConfig.queryString&&(e+="?"+this.computedConfig.queryString),e}updateHeaders(e){return this.computedConfig.headers=l({},this.computedConfig.headers,e),this.parseRequestBody(),this}parseRequestBody(){var e;if(this.computedConfig.body&&this.computedConfig.headers){const t=Object.keys(this.computedConfig.headers).find((e=>"content-type"===e.toLowerCase()));if("application/x-www-form-urlencoded"===(t&&(null===(e=this.computedConfig.headers[t])||void 0===e?void 0:e.toString().split(";")[0].trim()))){const e=new URLSearchParams;for(const t of Object.keys(this.computedConfig.body)){const r=this.computedConfig.body[t];e.append(t,null==r?void 0:r.toString())}this.parsedBody=e}else this.parsedBody=this.computedConfig.body}else this.parsedBody=void 0}getParsedBody(){return this.parsedBody}updateQuery(e){return this.computedConfig.queryObject=l({},this.computedConfig.queryObject,e),this}triggerEvent(e){return y(this,void 0,void 0,(function*(){const t=this.eventHandlers[e];if(t)for(let e=0;e<t.length;e++){const r=t[e],o=yield r(this);if(o)return o}}))}addCanceller(e){this.canceler=e}cancel(){this.cancelled=!0,this.canceler&&this.canceler()}getRequestUrl(){let e,t=this.baseUrl.endsWith("/")?this.baseUrl:this.baseUrl+"/";t+=this.computedPath.startsWith("/")?this.computedPath.substring(1):this.computedPath,"undefined"!=typeof window&&(e=window.origin),e||-1===t.indexOf("://")&&(t=`https://${t}`);const r=new URL(t,e);return this.computedConfig.queryString&&(r.search=this.computedConfig.queryString),r}}const w={Post:"post",Get:"get",POST:"post",GET:"get",PUT:"put",DELETE:"delete",PATCH:"patch"},b={BeforeSend:"beforeSend",Success:"success",Error:"error",UnrecoverableError:"unrecoverableError",BEFORE_SEND:"beforeSend",SUCCESS:"success",ERROR:"error",UNRECOVERABLE_ERROR:"unrecoverableError"},_={Respond:"respond",Retry:"retry",RESPOND:"respond",RETRY:"retry"},E={Api:"api",Local:"local",API:"api",LOCAL:"local"},C={Json:"json",Text:"text",ArrayBuffer:"arraybuffer",JSON:"json",TEXT:"text",ARRAY_BUFFER:"arraybuffer"};function R(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}R.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},R.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},R.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var o=this;return this._timer=setTimeout((function(){o._attempts++,o._operationTimeoutCb&&(o._timeout=setTimeout((function(){o._operationTimeoutCb(o._attempts)}),o._operationTimeout),o._options.unref&&o._timeout.unref()),o._fn(o._attempts)}),r),this._options.unref&&this._timer.unref(),!0},R.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},R.prototype.try=function(e){this.attempt(e)},R.prototype.start=function(e){this.attempt(e)},R.prototype.start=R.prototype.try,R.prototype.errors=function(){return this._errors},R.prototype.attempts=function(){return this._attempts},R.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,o=0;o<this._errors.length;o++){var n=this._errors[o],s=n.message,i=(e[s]||0)+1;e[s]=i,i>=r&&(t=n,r=i)}return t};const T=R,x=e=>{var t;const r=(e,t)=>{const r=t.randomize?Math.random()+1:1;let o=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return o=Math.min(o,t.maxTimeout),o},o=Object.assign({retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1},e);if(o.minTimeout>o.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");const n=[],s=null!==(t=o.retries)&&void 0!==t?t:10;for(let i=0;i<s;i++)n.push(r(i,o));return e&&e.forever&&!n.length&&n.push(r(s,o)),n.sort((function(e,t){return e-t})),n},q=(e,t)=>new Promise(((r,o)=>{const n=t||{};"randomize"in n||(n.randomize=!0);const s=(e=>{const t=x(e);return new T(t,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})})(n),i=e=>{o(e||new Error("Aborted"))},c=(e,t)=>{e.bail?i(e):s.retry(e)?n.onRetry&&n.onRetry(e,t):o(s.mainError())};s.attempt((t=>{let o;try{o=e(i,t)}catch(n){return void c(n,t)}Promise.resolve(o).then(r).catch((function(e){c(e,t)}))}))})),k="misc/unknown-error",S="request/network-error",O="request/invalid-status",P="request/invalid-config",j="request/mismatch-response-type",B=e=>"isRequestError"in e,$=e=>{const{error:t,context:r,response:o,code:n}=e,s=r.getParsedBody(),i=Object.assign(t,{name:"RequestError",response:o,code:n,isRequestError:!0,request:{url:r.getRequestUrl().href,query:r.computedConfig.queryObject,headers:r.computedConfig.headers,body:s}});return delete i.config,delete i.toJSON,Object.setPrototypeOf(t,Error),i};var I=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};var U=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};const A={},M={},N=new class{constructor(){this.id="mock"}convertResponse(e,t,r){return I(this,void 0,void 0,(function*(){return t}))}extractResponseFromError(e){return I(this,void 0,void 0,(function*(){if("response"in e){const t=e;return t.response?t.response:null}}))}runRequest(e){var t,r,o,n;return I(this,void 0,void 0,(function*(){const s=null===(t=e.mocking)||void 0===t?void 0:t.handler;if(!s)throw $({error:new Error("[api-def] Attempted to run mocked request without mocking function"),code:P,context:e});const i={body:e.getParsedBody(),params:null!==(r=e.computedConfig.params)&&void 0!==r?r:{},query:e.computedConfig.queryObject,headers:null!==(o=e.computedConfig.headers)&&void 0!==o?o:{},url:e.getRequestUrl().toString()},c={statusCode:-1,headers:{},response:void 0,status:e=>(c.statusCode=e,c),send:e=>(c.response=e,e&&"object"==typeof e&&(c.headers["Content-Type"]="application/json"),c)};if(null===(n=e.mocking)||void 0===n?void 0:n.delay){const t=e.mocking.delay;let r;if("number"==typeof t)r=t;else{const[o,n]=t;if(o>n)throw $({error:new Error("[api-def] Min delay cannot be greater than max delay"),code:P,context:e});r=((e,t)=>{const r=Math.ceil(e),o=Math.floor(t);return Math.floor(Math.random()*(o-r+1))+r})(o,n)}yield((e,t)=>new Promise((r=>{t>0?setTimeout((()=>{r(e)}),t):r(e)})))(yield s(i,c),r)}else yield s(i,c);if(void 0===c.response)throw $({error:new Error("[api-def] Mocked API did not respond"),code:P,context:e});const a=Object.keys(c.headers).reduce(((e,t)=>(e[t]=c.headers[t].toString(),e)),{});return{url:e.getRequestUrl().href,method:e.method,headers:a,data:c.response,status:c.statusCode}}))}makeRequest(e){return{canceler:m,promise:this.runRequest(e)}}getErrorInfo(e,t){}},H=(e,t,r)=>U(void 0,void 0,void 0,(function*(){const o=e.computeConfig(t),n=r?N:ne();if(!n)throw new Error("[api-def] Please specify a backend you wish to use, this can be done either with 'setRequestBackend()'");const s=new g(n,e,o,e.computePath(e.path,t),r),{key:i}=s,{lock:c}=s.computedConfig||{};if("string"==typeof c){const e=A[c];e&&e.id!==s.id&&e.cancel(),A[c]=s}try{let e=yield M[i]=L(s);const t=yield s.triggerEvent(b.Success);return t&&t.type===_.Respond&&(s.response=e=t.response),delete M[i],e}catch(a){throw delete M[i],a}finally{"string"==typeof c&&delete A[c]}}));const L=e=>U(void 0,void 0,void 0,(function*(){var t;const r=yield e.triggerEvent(b.BeforeSend);if(r&&r.type===_.Respond)return e.response=r.response;const o={retries:(null===(t=e.computedConfig)||void 0===t?void 0:t.retry)||0,minTimeout:1e3,maxTimeout:5e3,randomize:!0};e.stats.attempt=0;const n=(t,r)=>U(void 0,void 0,void 0,(function*(){e.stats.attempt++;try{const{promise:t,canceler:r}=e.backend.makeRequest(e);e.addCanceller(r);const o=yield t,n=yield D(e,o);if(!c(n.status,e.computedConfig.acceptableStatus))throw $({error:new Error(`[api-def] Invalid response status code '${n.status}'`),response:n,code:O,context:e});return e.response=n,n}catch(o){e.cancelled&&(o.isCancelledRequest=!0);const i=yield F(e,o);e.error=i,e.response=i.response;const c=yield e.triggerEvent(b.Error);if((null==c?void 0:c.type)===_.Respond)return c.response;if(s(i))throw i;if((null==c?void 0:c.type)===_.Retry)return n(t,r);const a=yield e.triggerEvent(b.UnrecoverableError);if(a&&a.type===_.Respond)return a.response;t(i)}}));return yield q(n,o)})),D=(e,t,r)=>U(void 0,void 0,void 0,(function*(){var o;if(t){const s=yield e.backend.convertResponse(e,t);s.headers=s.__lowercaseHeaders||Object.keys(s.headers).reduce(((e,t)=>(e[t.toLowerCase()]=s.headers[t],e)),{});const i=s.headers["content-type"],c=h(i);if(!r){if("text"===c&&"json"===e.responseType)throw $({error:new Error(`[api-def] Expected '${e.responseType}' response, got '${c}' (from 'Content-Type' of '${i}')`),code:j,response:s,context:e});if("arraybuffer"===c&&"json"===e.responseType&&s.data&&"object"==typeof s.data){const r=t.data;if("ArrayBuffer"===(null===(o=r.constructor)||void 0===o?void 0:o.name))try{const e=t.data=((e,t)=>{if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8").decode(e);const r=String.fromCharCode,o={}.toString,n=o.call(window.SharedArrayBuffer),s=o(),i=window.Uint8Array,c=i||Array,a=i?ArrayBuffer:c,u=a.isView||function(e){return e&&"length"in e},d=o.call(a.prototype),h=new(i?Uint16Array:c)(32);let l,f=e;if(!u(f)){if(l=o.call(f),l!==d&&l!==n&&l!==s)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");f=i?new c(f):f||[]}let p="",m="",y=0,v=0|f.length,g=v-32|0,w=0,b=0,_=0,E=0,C=0,R=0,T=-1;for(;y<v;){for(w=y<=g?32:v-y|0;R<w;y=y+1|0,R=R+1|0){switch(b=255&f[y],b>>4){case 15:if(C=255&f[y=y+1|0],C>>6!=2||247<b){y=y-1|0;break}_=(7&b)<<6|63&C,E=5,b=256;case 14:C=255&f[y=y+1|0],_<<=6,_|=(15&b)<<6|63&C,E=C>>6==2?E+4|0:24,b=b+256&768;case 13:case 12:C=255&f[y=y+1|0],_<<=6,_|=(31&b)<<6|63&C,E=E+7|0,y<v&&C>>6==2&&_>>E&&_<1114112?(b=_,_=_-65536|0,0<=_?(T=55296+(_>>10)|0,b=56320+(1023&_)|0,R<31?(h[R]=T,R=R+1|0,T=-1):(C=T,T=b,b=C)):w=w+1|0):(b>>=8,y=y-b-1|0,b=65533),E=0,_=0,w=y<=g?32:v-y|0;default:h[R]=b;continue;case 11:case 10:case 9:case 8:}h[R]=65533}if(m+=r(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15],h[16],h[17],h[18],h[19],h[20],h[21],h[22],h[23],h[24],h[25],h[26],h[27],h[28],h[29],h[30],h[31]),R<32&&(m=m.slice(0,R-32|0)),y<v){if(h[0]=T,R=~T>>>31,T=-1,m.length<p.length)continue}else-1!==T&&(m+=r(T));p+=m,m=""}return p})(r);t.data=JSON.parse(e)}catch(n){throw $({error:new Error(`[api-def] Expected '${e.responseType}' response, got '${c}' (from 'Content-Type' of '${i}')`),code:j,response:s,context:e})}}}return s}return t})),F=(e,t)=>U(void 0,void 0,void 0,(function*(){let r;if(B(t))r=t;else{const o=yield e.backend.extractResponseFromError(t);let n;void 0!==o&&(n=yield D(e,o,!0));let i=s(t)?S:k;n&&(c(n.status,e.computedConfig.acceptableStatus)||(i=O));const a=e.backend.getErrorInfo(t,n);r=$(Object.assign({error:t,response:n,code:i,context:e},a))}return r})),J=Symbol("computed"),W=e=>{var t,r;const o=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const i=n[s];o.push(`${i}=${null!==(r=null===(t=e[i])||void 0===t?void 0:t.toString())&&void 0!==r?r:""}`)}return o.join("&")},G=e=>{const t={},r=e.split("&");for(let o=0;o<r.length;o++){const[e,n]=r[o].split("=");t[e]=!(null==n?void 0:n.length)||n}return t},z=["headers"],V=e=>{var t,r;const o=l({[J]:!0},...e);for(const c of z)o[c]=l({},...e.reduce(((e,t)=>((null==t?void 0:t[c])&&e.push(t[c]),e)),[]));o.queryHandling={parse:(null===(t=o.queryHandling)||void 0===t?void 0:t.parse)||G,stringify:(null===(r=o.queryHandling)||void 0===r?void 0:r.stringify)||o.queryParser||W},delete o.queryParser;const n=o.query;let s,i;return n&&(Object.defineProperty(o,"queryString",{get:()=>s||(s="string"==typeof n?n:o.queryHandling.stringify(n))}),Object.defineProperty(o,"queryObject",{get:()=>i||(i="string"==typeof n?o.queryHandling.parse(n):n),set(e){i=e,s=o.queryHandling.stringify(e)}})),o};var Y=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};class K{constructor(e,t){this.api=e,this.id=t.id,this.method=t.method,this.name=t.name||t.id,this.description=t.description,this.path=t.path,this.config=t.config,this.responseType=t.responseType,this.mocking=t.mocking}submit(e){var t,r;return Y(this,void 0,void 0,(function*(){let o=!1;const n=this.api.mocking;if(n){if(null!==(t="function"==typeof n.enabled?n.enabled():n.enabled)&&void 0!==t&&t){if(!(null===(r=this.mocking)||void 0===r?void 0:r.handler))throw new Error(`[api-def] Endpoint for '${this.path}' has no mocking`);o=!0}}return H(this,e,o?this.mocking:null)}))}computePath(e,t){let r=e.startsWith("/")?e:`/${e}`;if(t.params){const e=Object.keys(t.params);for(let o=0;o<e.length;o++){const n=e[o];r=r.replace(`:${n}`,t.params[n])}}if(r.includes(":"))throw new Error(`[api-def] Not all path params have been resolved: '${r}'`);return r}get baseUrl(){return this.api.baseUrl}computeConfig(e){const t=this.api.getConfig();l({[J]:!0},t,this.config,e);return V([t,this.config,e])}}class Q{constructor(e){this.api=e}queryOf(){return this}paramsOf(){return this}bodyOf(){return this}responseOf(){return this}build(e){const t=new K(this.api,e);return this.api.endpoints[t.id]=t,t}}var X=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};class Z extends Error{}class ee{constructor(e){this.fetch=p(),this.id="fetch",void 0!==e&&(this.fetch=e)}extractResponseFromError(e){return X(this,void 0,void 0,(function*(){if("response"in e){const t=e;return t.response?t.response:null}}))}convertResponse(e,t){return X(this,void 0,void 0,(function*(){const r=t.headers.get("Content-Type"),o=h(r);t.__text||(t.__text=yield t.clone().text());let n=t.__text;const{status:s,headers:i}=t;try{"arraybuffer"===o?n=yield t.clone().arrayBuffer():"json"===o&&(n=JSON.parse(t.__text))}catch(a){throw Object.assign(new Error(`[api-def] Invalid '${e.responseType}' response, got: '${t.__text}'`),{response:t})}const c={};return i.forEach(((e,t)=>{c[t]=e})),{__lowercaseHeaders:c,method:e.method,url:t.url,data:n,status:s,headers:c}}))}makeRequest(e){if(!this.fetch)throw new Error("[api-def] No fetch impl was provided to FetchRequestBackend");const{computedConfig:t}=e,r=AbortController&&new AbortController,o=r?r.signal:void 0;let n=!1,s=!1;const i=e.getParsedBody(),c=null!==i&&"object"==typeof i,a=l({"Content-Type":c?"application/json;charset=utf-8":"application/x-www-form-urlencoded"},t.headers),u=Object.keys(a).reduce(((e,t)=>{const r=a[t];return void 0!==r&&(e[t]=r),e}),{}),d=e.getRequestUrl();return{promise:this.fetch(d.href,{method:e.method,body:c?JSON.stringify(i):i,headers:u,mode:"cors",signal:o}).then((e=>{if(s=!0,!e.ok){const t=new Z("Fetch failed");throw t.response=e,t}if(n)throw new Error("[api-def] Request was aborted");return e})),canceler:o?()=>!s&&r.abort():()=>{n=!0}}}getErrorInfo(e,t){}}var te=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};let re=p()?new ee:null,oe=!0;const ne=()=>re,se=()=>oe,ie=e=>{oe=!1,re=e};class ce{constructor(e,t,r){this.responseType=void 0,this.api=e,this.method=r,this.path=t}get baseUrl(){return this.api.baseUrl}computeConfig(e){const t=this.api.getConfig();return V([t,e])}computePath(e,t){return e.startsWith("/")?e:`/${e}`}}class ae{constructor(e){var t;this.endpoints={},this.hotRequest=e=>(t,r)=>te(this,void 0,void 0,(function*(){return yield H(new ce(this,t,e),r,null)})),this.get=this.hotRequest(w.GET),this.post=this.hotRequest(w.POST),this.put=this.hotRequest(w.PUT),this.delete=this.hotRequest(w.DELETE),this.patch=this.hotRequest(w.PATCH),this.name=e.name,this.baseUrl=e.baseUrl,this.middleware=e.middleware||[],this.endpoints={},this.config=e.config,this.mocking=null!==(t=e.mocking)&&void 0!==t?t:void 0}endpoint(){return new Q(this)}getConfig(){return("function"==typeof this.config?this.config():this.config)||{}}}var ue=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};class de{clear(){return ue(this,void 0,void 0,(function*(){localStorage.clear()}))}getItem(e){return ue(this,void 0,void 0,(function*(){const t=localStorage.getItem(e);return t?JSON.parse(t):null}))}removeItem(e){return ue(this,void 0,void 0,(function*(){localStorage.removeItem(e)}))}setItem(e,t){return ue(this,void 0,void 0,(function*(){localStorage.setItem(e,JSON.stringify(t))}))}}var he=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};let le=new de;const fe=e=>{le=e},pe=()=>le.clear();class me{constructor(e){this.store=e.createInstance({name:"requestCache"})}clear(){return this.store.clear()}getItem(e){return this.store.getItem(e)}removeItem(e){return this.store.removeItem(e)}setItem(e,t){return this.store.setItem(e,t)}}var ye=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};let ve;class ge{constructor(e){this.id="axios",ve=e}extractResponseFromError(e){return ye(this,void 0,void 0,(function*(){if((e=>"isAxiosError"in e)(e))return e.response?e.response:null}))}convertResponse(e,t){return ye(this,void 0,void 0,(function*(){return{method:e.method,url:t.request.res.responseUrl,data:t.data,headers:t.headers,status:t.status,__lowercaseHeaders:t._lowerCaseResponseHeaders}}))}makeRequest(e){const{computedConfig:t}=e,r=e.getRequestUrl();let o=null;return{promise:ve({method:e.method,url:r.href,data:e.getParsedBody(),headers:t.headers||{},responseType:e.responseType,cancelToken:new ve.CancelToken((e=>{o=e}))}),canceler:()=>o&&o()}}getErrorInfo(e,t){}}var we=function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{a(o.next(e))}catch(t){s(t)}}function c(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};const be=function(e){return void 0===e&&(e={}),{[b.Success]:t=>we(void 0,void 0,void 0,(function*(){if(t.method!==w.Get)return;const{cache:r}=t.computedConfig||{},o=!e.predicate||e.predicate();if(r&&o){const o="number"==typeof r?r:e.defaultExpiry||9e5;yield((e,t,r)=>he(void 0,void 0,void 0,(function*(){const o={data:t,expiry:void 0===r||isNaN(r)?null:r};return yield le.setItem(e,o),t})))(t.key,t.response,o)}})),[b.BeforeSend]:t=>we(void 0,void 0,void 0,(function*(){if(t.method!==w.Get)return;const{cache:r}=t.computedConfig||{},o=!e.predicate||e.predicate();if(r&&o&&r){const e=yield(n=t.key,he(void 0,void 0,void 0,(function*(){const e=yield le.getItem(n);if(e){if(!("number"==typeof e.expiry&&Date.now()>=e.expiry))return e.data;yield le.removeItem(n)}})));if(e)return t.stats.cached={is:!0,by:E.Local},t.cacheInfo.source=E.Local,t.cacheInfo.cached=!0,{type:_.Respond,response:e}}var n;!1===r&&(t.updateQuery({_bust:Math.floor(9e3*Math.random())+1e3}),t.updateHeaders({Pragma:"no-cache, no-store, must-revalidate","Cache-Control":"no-cache, no-store, must-revalidate"}))}))}};var _e;!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Error=2]="Error",e[e.Warn=3]="Warn"}(_e||(_e={}));const Ee={[_e.Error]:"#c8646c",[_e.Info]:"#85a6c7",[_e.Success]:"#a9c490",[_e.Warn]:"#d19a66"},Ce=e=>{if(!e.response)return s(e)?{message:"network issue",error:e}:(e=>"isCancelledRequest"in e)(e)?{message:"cancelled",error:e}:{message:"client-side error",error:e};const{status:t,data:r}=e.response,o=null==r?void 0:r.code;return{message:`responded with ${t}${o?` (${o})`:""}`,response:e.response}},Re=(e,t,r,o,n)=>{if("function"==typeof o.predicate&&!o.predicate())return;const{computedPath:s}=e,i=Ee[t],c=(a=new Date,`${f(a.getHours(),2)}:${f(a.getMinutes(),2)}:${f(a.getSeconds(),2)}.${f(a.getMilliseconds(),3)}`);var a;const u=[`%cnetwork %c[${e.api.name}] ${e.method.toUpperCase()} ${s} %c${r} %c@ ${c}`,"color:gray","color:auto",`color:${i}`,"color:gray"];console.groupCollapsed(...u),console.log(l({context:e},n||{})),console.groupEnd()},Te=function(e){return void 0===e&&(e={}),{[b.BeforeSend]:t=>{Re(t,_e.Info,t.stats.attempt>1?"retrying":"sending",e)},[b.Success]:t=>{var r;const o=t.cacheInfo.source;Re(t,_e.Success,`responded with ${null===(r=t.response)||void 0===r?void 0:r.status}${o?` (cached by ${o})`:""}`,e)},[b.Error]:t=>{if(t.error){const{error:r,message:o}=Ce(t.error);Re(t,_e.Warn,`error on attempt ${t.stats.attempt} - ${o}`,e,{error:r})}},[b.UnrecoverableError]:t=>{if(t.error){const{error:r,message:o}=Ce(t.error);Re(t,_e.Error,`failed - ${o}`,e,{error:r})}}}};var xe=r(9792);const qe={React:n,...n,useAsyncState:xe.P,...o}}}]);